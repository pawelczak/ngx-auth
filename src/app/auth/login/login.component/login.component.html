<md-card *ngIf="!isLogged; else isLoggedTemplate">

	<md-card-title>Welcome</md-card-title>

	<md-card-content>

		<form [formGroup]="loginForm">

			<div class="md-block">
				<md-error *ngIf="loginErrors">
					Login and password doesn't match.
				</md-error>
			</div>

			<div class="md-block">
				<md-input-container>
					<input type="text"
						   name="Username"
						   mdInput
						   formControlName="username"
						   placeholder="Username" />
					<md-error>This field is required</md-error>
				</md-input-container>
			</div>

			<div class="md-block">
				<md-input-container class="button-row">
					<input type="password"
						   name="password"
						   mdInput
						   formControlName="password"
						   placeholder="Password" />
					<md-error>This field is required</md-error>
				</md-input-container>
			</div>

			<div class="md-block button-row" flex>

				<button md-raised-button
						(click)="login(loginForm.value)"
						[disabled]="!loginForm.valid"
						color="primary"
						class="btn-login" >Login</button>

				<md-progress-spinner *ngIf="fetching"
									 [mode]="'indeterminate'"
									 class="spinner" >
				</md-progress-spinner>
			</div>

		</form>

	</md-card-content>

</md-card>

<ng-template #isLoggedTemplate>
	<md-card>
		<md-card-title>Login Successful</md-card-title>
		<md-card-content>
			Redirecting...

			<md-progress-spinner [mode]="'indeterminate'"
								 class="spinner" >
			</md-progress-spinner>

		</md-card-content>
	</md-card>
</ng-template>
